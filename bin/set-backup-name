#!/bin/bash

# Get the branch name
branch_name="$(git symbolic-ref HEAD 2>/dev/null)" ||
branch_name="detached"     # detached HEAD
branch_name=${branch_name##refs/heads/}

# Set the message if one was passed
while getopts "m:" var; do
    case $var in
        m) message="${OPTARG// /_}-";;
        *) message='';;
    esac
done

BACKUP_NAME=$branch_name-$message$(date +%m.%d.%y-%H-%M).sql.gzip
