// Todo: Clean up this file

.block-menu-block { // All nav menus
  clear: both;
  h2 { @extend .hidden; }
}

.jpanel-trigger-container {
  [data-eq-state="regular-nav"] & {
    @extend .hidden;
  }
  float: right;
  clear: right;
  margin-right: 1em;

  a {
    @extend .button;
    @extend .button-rounded;
    padding: 0 .7em;
    font-size: .8em;
    height: 25px;
    line-height: 25px;
    color: $brand;

    &:hover, &:visited, &:active, &:focus {
      text-decoration: none;
    }
  }
}

.menu-block-ilr-primary-menu { // Main nav
  clear: left;
  float: left;
  width: 100%;
  @extend .hidden;

  [data-eq-state="regular-nav"] & {
    @extend .visible;
  }

  ul.menu {
    display: flex;
    justify-content: space-around;
    list-style: none;
    padding: 0;
    margin: 0;

    li {
      background: none;
      list-style: none;
      line-height: 1;
      margin: 0;
      padding: 0;

      a, a:visited, a:hover {
        flex-grow: 1;
        display: flex;
        color: white;
        font-family: $font-headers;
        text-decoration: none;
        font-weight: 400;
        outline: 0;
      }
    }
  }
}

@include breakpoint(1065px) {
  .menu-block-ilr-primary-menu ul {
    padding-left: 50px; //move this
    li {
      padding-right: 30px;
      &:last-child {
        padding: 0;
      }
      a {
        font-size: 18px;
      }
    }
  }
}

.jPanelMenu-panel {
  @include box-shadow(0 10px 10px 0px rgba(black, .5));
}

#jPanelMenu-menu {
  margin-top: $header-height-small;
}

.sidebar, #jPanelMenu-menu {
  overflow: hidden;
  position: relative;
}

.menu-block-ilr-subnav {
  opacity: 0;
}

.sidebar #block-menu-block-ilr-subnav {
  @extend .hidden;

  [data-eq-state="regular-nav"] & {
    @extend .visible;
  }
}

.menu-block-ilr-subnav ul.menu {
  visibility: hidden;
  [data-menu-position="open"] & {
    visibility: visible;
  }
  position: relative;
  top: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  display: block;
  background: white;
  min-height: 500px;

  li {
    list-style: none;
    background-image: none;
    margin: 0;
    padding: 0 !important;
    font-family: freight-sans-pro;
    clear: both;
    min-height: 100%;
    display: flex;

    #jPanelMenu-menu & {
      background: $nav-dark;
    }

    a {
      color: $gray-dark;
      #jPanelMenu-menu & {
        color: darken($gray-light, 10%);
      }
      display: block;
      padding: 1em;
      float: left;
      width: 100%;

      &:hover {
        color: $brand;
        #jPanelMenu-menu & {
          color: white;
        }
        text-decoration: none;
        background: darken($nav-light, 5%);

        #jPanelMenu-menu & {
         background: lighten($nav-dark, 5%);
        }

      }
      &.active, &.active-trail {
        color: $brand;
        #jPanelMenu-menu & {
          color: white;
        }
      }
      &.active {
        font-weight: 600;
      }
    }
    &.expanded > a {
      width: 80%;
      &.next-menu {
        width: 20%;
        padding: 1em;
        z-index: 1;
        display: flex;
        justify-content: center;

        span {
          @extend %nav-arrow;
        }

        #jPanelMenu-menu & {
          padding: .8em 1em 1.1em 1em;
          border-left: 1px solid lighten($nav-dark, 15%);
        }
      }
    }
  }

  li.back {
    padding: 0;
    a.prev-menu {
      color: darken($gray-light, 10%);
      width: 100%;
      display: flex;
      justify-content: center;
      span {
        @extend %nav-arrow;
        margin-right: .2em;
      }
    }
  }

  li ul.menu {
    position: absolute;
    right: -100%;
    top: 0;
    z-index: 2;

    .sidebar & {
      @include box-shadow(rgba(black, .3) 1px 1px 5px);
    }
  }

  & > li {
    @extend .clearfix;
    border-bottom: 1px solid darken($nav-light, 10%);
    #jPanelMenu-menu & {
      border-bottom: 1px solid lighten($nav-dark, 15%);
    }
  }
}

%nav-arrow {
  font-size: 2em;
  color: darken($gray-light, 10%);
  display: flex;
  align-items: center;
  margin-top: -5px;
}
